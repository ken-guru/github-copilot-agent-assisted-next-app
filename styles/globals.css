/* Global styles for the application */
:root {
  /* Layout variables */
  --navbar-height: 56px; /* Bootstrap navbar standard height */
  
  /* Core theme colors - light theme defaults */
  --bg-primary: #ffffff;
  --bg-secondary: #f5f5f5;
  --text-primary: #333333;
  --text-secondary: #666666;
  --accent-color: #0070f3;
  --border-color: #e5e5e5;
  
  /* Store dark mode values for reference without applying them */
  --bg-primary-dark: #121212;
  --bg-secondary-dark: #1e1e1e;
  --text-primary-dark: #f5f5f5;
  --text-secondary-dark: #b3b3b3;
  --accent-color-dark: #30a9de;
  --border-color-dark: #333333;
  
  /* Spacing Scale */
  --space-xs: 0.25rem;  /* 4px */
  --space-sm: 0.5rem;   /* 8px */
  --space-md: 1rem;     /* 16px */
  --space-lg: 1.5rem;   /* 24px */
  --space-xl: 2rem;     /* 32px */
  --space-xxs: 0.125rem; /* 2px - for very small spaces on mobile */
  
  /* Responsive spacing variables */
  --space-mobile-xs: 0.25rem;
  --space-mobile-sm: 0.375rem;
  --space-mobile-md: 0.75rem;
  --space-mobile-lg: 1rem;
  --space-mobile-xl: 1.5rem;
  
  /* Semantic Spacing Variables */
  --padding-small: var(--space-sm);
  --padding-medium: var(--space-md);
  --padding-large: var(--space-lg);
  --gap-small: var(--space-xs);
  --gap-medium: var(--space-sm);
  --gap-large: var(--space-md);
  
  /* Border Radius Scale */
  --radius-none: 0;
  --radius-xs: 0.125rem;  /* 2px */
  --radius-sm: 0.25rem;   /* 4px */
  --radius-md: 0.375rem;  /* 6px */
  --radius-lg: 0.5rem;    /* 8px */
  --radius-xl: 0.75rem;   /* 12px */
  --radius-full: 9999px;
  
  /* Semantic Border Radius Variables */
  --radius-button: var(--radius-md);
  --radius-card: var(--radius-lg);
  --radius-input: var(--radius-sm);
  --radius-badge: var(--radius-full);
  --radius-tooltip: var(--radius-xs);
  --radius-panel: var(--radius-lg);
  
  /* Shadow Scale */
  --shadow-none: none;
  --shadow-xs: 0 1px 2px hsla(0, 0%, 0%, 0.07);
  --shadow-sm: 0 1px 3px hsla(0, 0%, 0%, 0.12);
  --shadow-md: 0 4px 6px hsla(0, 0%, 0%, 0.1);
  --shadow-lg: 0 10px 15px hsla(0, 0%, 0%, 0.1);
  --shadow-xl: 0 20px 25px hsla(0, 0%, 0%, 0.15);
  
  /* Semantic Shadow Variables */
  --shadow-card: var(--shadow-sm);
  --shadow-card-hover: var(--shadow-md);
  --shadow-dropdown: var(--shadow-md);
  --shadow-modal: var(--shadow-lg);
  --shadow-header: var(--shadow-sm);
  --shadow-button: var(--shadow-xs);
  --shadow-focus: 0 0 0 4px rgba(0, 112, 243, 0.35);
  --shadow-small: var(--shadow-xs);
  
  /* Component Sizing Scale */
  --control-height-sm: 24px;
  --control-height-md: 28px;
  --control-height-lg: 36px;
  --icon-size-sm: 14px;
  --icon-size-md: 16px;
  --icon-size-lg: 20px;
  
  /* Generic UI Variables */
  --background: var(--bg-primary);
  --background-alt: var(--bg-secondary);
  --background-muted: rgba(0, 0, 0, 0.05);
  --foreground: var(--text-primary);
  --foreground-muted: var(--text-secondary);
  --border: var(--border-color);
  --border-hover: #b3b3b3;
  --accent-color-rgb: 0, 112, 243;
  --accent-color-hover: #0060d1;
  
  /* Status Colors */
  --error: #dc2626;
  --error-bg: #fee2e2;
  --success: #16a34a;
  --success-bg: #dcfce7;
  --warning: #ca8a04;
  --warning-bg: #fef3c7;
  --info: #2563eb;
  --info-bg: #dbeafe;
  
  /* Status Message Colors */
  --status-ontime-bg: #dcfce7;
  --status-ontime-text: #16a34a;
  --status-early-bg: #dbeafe;
  --status-early-text: #2563eb;
  --status-late-bg: #fee2e2;
  --status-late-text: #dc2626;
}

/* Apply dark theme values when any dark mode class/attribute is present */
.dark, 
.dark-mode,
[data-theme="dark"],
:root.dark-mode, 
:root[data-theme="dark"] {
  --bg-primary: var(--bg-primary-dark);
  --bg-secondary: var(--bg-secondary-dark);
  --text-primary: var(--text-primary-dark);
  --text-secondary: var(--text-secondary-dark);
  --accent-color: var(--accent-color-dark);
  --border-color: var(--border-color-dark);
  
  /* Dark theme overrides for generic UI variables */
  --background: var(--bg-primary-dark);
  --background-alt: var(--bg-secondary-dark);
  --background-muted: rgba(255, 255, 255, 0.1);
  --foreground: var(--text-primary-dark);
  --foreground-muted: var(--text-secondary-dark);
  --border: var(--border-color-dark);
  --border-hover: #666666;
  --accent-color-rgb: 48, 169, 222;
  --accent-color-hover: #4db6e5;
  
  /* Dark theme overrides for status colors */
  --error: #f87171;
  --error-bg: rgba(220, 38, 38, 0.2);
  --success: #4ade80;
  --success-bg: rgba(22, 163, 74, 0.2);
  --warning: #fcd34d;
  --warning-bg: rgba(202, 138, 4, 0.2);
  --info: #60a5fa;
  --info-bg: rgba(37, 99, 235, 0.2);
  
  /* Dark theme overrides for status message colors */
  --status-ontime-bg: rgba(22, 163, 74, 0.2);
  --status-ontime-text: #4ade80;
  --status-early-bg: rgba(37, 99, 235, 0.2);
  --status-early-text: #60a5fa;
  --status-late-bg: rgba(220, 38, 38, 0.2);
  --status-late-text: #f87171;
  
  /* Shadow adjustments for dark theme */
  --shadow-xs: 0 1px 2px hsla(0, 0%, 0%, 0.15);
  --shadow-sm: 0 1px 3px hsla(0, 0%, 0%, 0.2);
  --shadow-md: 0 4px 6px hsla(0, 0%, 0%, 0.18);
  --shadow-lg: 0 10px 15px hsla(0, 0%, 0%, 0.18);
  --shadow-xl: 0 20px 25px hsla(0, 0%, 0%, 0.25);
  --shadow-focus: 0 0 0 4px rgba(48, 169, 222, 0.35);
}

/* Apply dark theme based on system preference unless explicitly overridden */
@media (prefers-color-scheme: dark) {
  :root:not([data-theme="light"]):not(.light-mode) {
    --bg-primary: var(--bg-primary-dark);
    --bg-secondary: var(--bg-secondary-dark);
    --text-primary: var(--text-primary-dark);
    --text-secondary: var(--text-secondary-dark);
    --accent-color: var(--accent-color-dark);
    --border-color: var(--border-color-dark);
    
    /* Dark theme overrides for generic UI variables */
    --background: var(--bg-primary-dark);
    --background-alt: var(--bg-secondary-dark);
    --background-muted: rgba(255, 255, 255, 0.1);
    --foreground: var(--text-primary-dark);
    --foreground-muted: var(--text-secondary-dark);
    --border: var(--border-color-dark);
    --border-hover: #666666;
    --accent-color-rgb: 48, 169, 222;
    --accent-color-hover: #4db6e5;
    
    /* Dark theme overrides for status colors */
    --error: #f87171;
    --error-bg: rgba(220, 38, 38, 0.2);
    --success: #4ade80;
    --success-bg: rgba(22, 163, 74, 0.2);
    --warning: #fcd34d;
    --warning-bg: rgba(202, 138, 4, 0.2);
    --info: #60a5fa;
    --info-bg: rgba(37, 99, 235, 0.2);
    
    /* Dark theme overrides for status message colors */
    --status-ontime-bg: rgba(22, 163, 74, 0.2);
    --status-ontime-text: #4ade80;
    --status-early-bg: rgba(37, 99, 235, 0.2);
    --status-early-text: #60a5fa;
    --status-late-bg: rgba(220, 38, 38, 0.2);
    --status-late-text: #f87171;
    
    /* Shadow adjustments for dark theme */
    --shadow-xs: 0 1px 2px hsla(0, 0%, 0%, 0.15);
    --shadow-sm: 0 1px 3px hsla(0, 0%, 0%, 0.2);
    --shadow-md: 0 4px 6px hsla(0, 0%, 0%, 0.18);
    --shadow-lg: 0 10px 15px hsla(0, 0%, 0%, 0.18);
    --shadow-xl: 0 20px 25px hsla(0, 0%, 0%, 0.25);
    --shadow-focus: 0 0 0 4px rgba(48, 169, 222, 0.35);
  }
}

html,
body {
  padding: 0;
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Oxygen,
    Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;
  background-color: var(--bg-primary);
  color: var(--text-primary);
  /* Prevent white flash during navigation and theme transitions */
  transition: background-color 0s, color 0s;
}

/* Apply light theme when explicitly set */
body[data-bs-theme="light"],
html[data-bs-theme="light"] body {
  background-color: #ffffff;
  color: #333333;
}

/* Apply dark theme when explicitly set */
body[data-bs-theme="dark"],
html[data-bs-theme="dark"] body {
  background-color: #121212;
  color: #f5f5f5;
}

html {
  scroll-behavior: smooth;
}

/* Respect user's motion preferences */
@media (prefers-reduced-motion: reduce) {
  html {
    scroll-behavior: auto;
  }
}

.dark body {
  background-color: var(--bg-primary-dark);
  color: var(--text-primary-dark);
}

a {
  color: inherit;
  text-decoration: none;
}

* {
  box-sizing: border-box;
}

/* Utility classes */
.visually-hidden {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

/* Animation utilities */
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes fadeOut {
  from { opacity: 1; }
  to { opacity: 0; }
}

.fade-in {
  animation: fadeIn 0.3s ease-in-out forwards;
}

.fade-out {
  animation: fadeOut 0.3s ease-in-out forwards;
}

/* Consistent Card Header Heights */
.card-header-consistent {
  height: 4rem; /* Fixed height instead of min-height */
  display: flex;
  align-items: center;
  justify-content: space-between;
  flex-shrink: 0;
}

/* Ensure content within card headers aligns properly */
.card-header-consistent h5 {
  margin: 0;
  line-height: 1.2;
}

.card-header-consistent .btn {
  flex-shrink: 0;
}

.card-header-consistent .badge {
  flex-shrink: 0;
}

/* Mobile responsive adjustments */
@media (max-width: 768px) {
  /* Ensure toast containers don't interfere with mobile scrolling */
  .toast-container {
    max-width: calc(100vw - 2rem);
  }
}

@media (max-width: 576px) {
  /* Additional small screen adjustments can be added here */
}

/* Prevent white flash in Bootstrap components during theme transitions */
.navbar,
.modal-content,
.modal-header,
.modal-footer,
.card,
.card-header,
.card-body,
.card-footer {
  transition: background-color 0s, color 0s, border-color 0s !important;
}

/* Immediate theme application with higher specificity to prevent flash */
html[data-bs-theme="dark"] .navbar,
[data-bs-theme="dark"] .navbar,
.navbar[data-bs-theme="dark"] {
  background-color: #212529 !important;
  border-color: #495057 !important;
  --bs-navbar-color: rgba(255, 255, 255, 0.85) !important;
  --bs-navbar-brand-color: #fff !important;
  --bs-navbar-nav-link-color: rgba(255, 255, 255, 0.75) !important;
  color: #fff !important;
}

html[data-bs-theme="light"] .navbar,
[data-bs-theme="light"] .navbar,
.navbar[data-bs-theme="light"] {
  background-color: #f8f9fa !important;
  border-color: #dee2e6 !important;
  --bs-navbar-color: rgba(0, 0, 0, 0.85) !important;
  --bs-navbar-brand-color: #000 !important;
  --bs-navbar-nav-link-color: rgba(0, 0, 0, 0.75) !important;
  color: #000 !important;
}

/* Ensure navbar has immediate background even before theme is applied */
.navbar {
  background-color: var(--bs-body-bg, #f8f9fa) !important;
  color: var(--bs-body-color, #212529) !important;
}

/* Modal content styling */
.modal-content {
  background-color: var(--bs-body-bg, var(--bg-primary));
  color: var(--bs-body-color, var(--text-primary));
}

/* Ensure modals respect theme immediately */
[data-bs-theme="dark"] .modal-content {
  background-color: #212529;
  color: #f8f9fa;
  border-color: #495057;
}

[data-bs-theme="light"] .modal-content {
  background-color: #ffffff;
  color: #212529;
  border-color: #dee2e6;
}

/* Enhanced active navigation state for better visibility */
.navbar .nav-link.active,
[data-bs-theme="dark"] .navbar .nav-link.active,
html[data-bs-theme="dark"] .navbar .nav-link.active {
  background-color: rgba(255, 255, 255, 0.2) !important;
  color: #fff !important;
  border-radius: 0.375rem !important;
  font-weight: 600 !important;
}

[data-bs-theme="light"] .navbar .nav-link.active,
html[data-bs-theme="light"] .navbar .nav-link.active {
  background-color: rgba(0, 0, 0, 0.1) !important;
  color: #000 !important;
  border-radius: 0.375rem !important;
  font-weight: 600 !important;
}

/* Enhanced hover states for nav links */
.navbar .nav-link:hover:not(.active) {
  background-color: rgba(var(--bs-navbar-color-rgb), 0.1) !important;
  border-radius: 0.375rem !important;
  transition: background-color 0.15s ease-in-out !important;
}
